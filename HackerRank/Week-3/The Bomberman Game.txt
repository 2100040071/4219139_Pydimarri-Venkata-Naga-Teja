#include <stdio.h>
#define SIZE 200
int rows, cols, seconds;
char board[SIZE][SIZE], nextBoard[SIZE][SIZE];
void copyBoard(char target[SIZE][SIZE], char source[SIZE][SIZE]) 
{
    for (int r = 0; r < rows; r++) 
    {
        for (int c = 0; c < cols; c++) 
        {
            target[r][c] = source[r][c];
        }
    }
}
void plantBombs(char b[SIZE][SIZE]) 
{
    for (int r = 0; r < rows; r++) 
    {
        for (int c = 0; c < cols; c++) 
        {
            b[r][c] = 'O';
        }
    }
}
void explode(char b[SIZE][SIZE]) 
{
    char temp[SIZE][SIZE];
    plantBombs(temp); 
    for (int r = 0; r < rows; r++) 
    {
        for (int c = 0; c < cols; c++) 
        {
            if (b[r][c] == 'O') 
            {
                temp[r][c] = '.';
                if (r > 0) temp[r - 1][c] = '.';
                if (r < rows - 1) temp[r + 1][c] = '.';
                if (c > 0) temp[r][c - 1] = '.';
                if (c < cols - 1) temp[r][c + 1] = '.';
            }
        }
    }
    copyBoard(b, temp);
}
int main() 
{
    scanf("%d %d %d", &rows, &cols, &seconds);
    for (int r = 0; r < rows; r++) 
    {
        scanf("%s", board[r]);
    }
    if (seconds == 1) 
    {
        
    }
     else if (seconds % 2 == 0) 
    {
        plantBombs(board);
    } else if (seconds % 4 == 3) 
    {
        explode(board);
    } else if (seconds % 4 == 1) 
    {
        explode(board);
        explode(board);
    }
    for (int r = 0; r < rows; r++) 
    {
        for (int c = 0; c < cols; c++)
        {
            printf("%c", board[r][c]);
        }
        printf("\n");
    }
    return 0;
}
